var ScrollContainerType=ScrollContainerType||{};ScrollContainerType.SCROLL="scroll",ScrollContainerType.SLIDER="slider",define("ScrollContainer",["Gesture","messageBus"],function(a,b){var c=function(c,d,e,f,g){function h(){x.interactive=!0,x.mousedown=x.touchstart=i,x.mouseup=x.touchend=j}function i(a){u=a,S=!0,w=q.update(e),TweenLite.killTweensOf(this),x.dispatchEvent({type:"down"})}function j(){if(S=!1,E==ScrollContainerType.SLIDER){var a=u.getLocalPosition(y),b=w.x-a.x,c=b>0?1:-1;t.x>10||Math.abs(b)>v.width*Q&&0>c?this._prev(!0):t.x<-10||Math.abs(b)>v.width*Q&&c>0?this._next(!0):this._goto(O,P,!0)}}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=.4,A=.95,B=.7,C=.25,D=!1,E=c,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=.5,Q=1.5,R={},S=!1;PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this),y=d,n=e,v=f||new PIXI.Rectangle,x=this,k=g,l=e?e.width:0,m=e?e.height:0,F=0,p=new PIXI.Graphics,p.beginFill(16711680,0),p.drawRect(0,0,1,1),p.endFill(),x.addChild(p),E==ScrollContainerType.SLIDER&&(this._slides=function(a){M=a},this._next=function(a){N<M.length-2?N++:N=M.length-1,this._goto(N,P,a)},this._prev=function(a){N>0?N--:N=0,this._goto(N,P,a)},this._goto=function(a,b,c){(O!==a||c)&&(o=-M[a].x+(v.width>>1),O=N=a,TweenLite.to(this,b||P,{x:o,onCompleteParams:[O],onComplete:function(a){s&&s(a)}}),r&&r(O))},this._viewPort=function(a){v=a,this._goto(O,.25,!0)}),this._viewRect=function(a){p.scale.x=l=a.width,p.scale.y=m=a.height,E==ScrollContainerType.SLIDER&&this._goto(O,.25,!0)},this._update=function(a){return o=q.update(a),K+=(o.y-this._lastMouseDownPoint.y)*z,L+=(o.x-this._lastMouseDownPoint.x)*z,this._lastMouseDownPoint=o,K*=B,L*=B,E===ScrollContainerType.SLIDER&&(t=MathUtils.getMovement(R,u.getLocalPosition(y))),o},this._back=function(){G=this.position.y,H=this.position.x,I=0,J=0,n&&(G>F||m<=v.height?I=-G*C:G+m<v.height&&(I=(v.height-m-G)*C),H>F||l<=v.width?J=-H*C:H+l<v.width&&(J=(v.width-l-H)*C)),Math.abs(K)<=.2&&(K=0),Math.abs(L)<=.2&&(L=0),K*=A,L*=A,"y"!=k&&(this.position.y+=Math.round(K+I)),"x"!=k&&(this.position.x+=Math.round(L+J)),0===Math.abs(L)&&0===Math.abs(K)||D!==!1||(b.emit("ScrollContainer:StartMoving"),D=!0),Math.abs(L)<=0&&Math.abs(K)<=0&&D===!0&&(b.emit("ScrollContainer:StopMoving"),D=!1)},this._onChange=function(a){r=a},this._onAfterChange=function(a){s=a},this.isDown=function(){return S},this.type=function(){return E},this._currentID=function(){return O},this._transitionTime=function(a){P=a},this._touchable=function(a){x.interactive=a,q.drag(y,this)},this._margeToSlide=function(a){Q=a},this.progress=function(){var a=-(this.position.y/(m-v.height));a=0>=a?0:a>=1?1:a,this.progressCallBack&&this.progressCallBack(a)},q=new a(k),q.drag(y,this),this.position.x=0,this.position.y=0,h()};return c.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),c.prototype.onChange=function(a){this._onChange(a)},c.prototype.onAfterChange=function(a){this._onAfterChange(a)},c.prototype.next=function(){this._next()},c.prototype.prev=function(){this._prev()},c.prototype.goTo=function(a){this._goto(a)},c.prototype.setSlides=function(a){this._slides(a)},c.prototype.viewRect=function(a){this._viewRect(a)},c.prototype.viewPort=function(a){this._viewPort(a)},c.prototype.setTransitionTime=function(a){this._transitionTime(a)},c.prototype.touchable=function(a){this._touchable(a)},c.prototype.setMargeToSlide=function(a){this._margeToSlide(a)},c.prototype.upDate=function(a){return this._update(a)},c.prototype.back=function(){this._back()},c.prototype.scroll=function(a){this.isDown()?this.upDate(a):this.type()==ScrollContainerType.SCROLL&&this.back(),this.progressCallBack&&(_oldY!==this.position.y&&this.progress(),_oldY=this.position.y)},c.prototype.progress=function(){this.progress()},c.prototype.onProgress=function(a){this.progressCallBack=a},c.prototype.dispose=function(){this._dispose()},c}),define("btnSocial",function(){var a=function(a,b,c,d,e){PIXI.DisplayObjectContainer.call(this);var f,g;f=new PIXI.Graphics,f.beginFill(16711680,0),f.drawRect(0,0,d||30,e||30),f.endFill(),f.interactive=!0,f.buttonMode=!0,f.tap=f.click=c,g=new PIXI.Text(a,{font:"60px fontello",fill:b||"#FFFFFF"}),g.x=f.width/2-g.width/2,g.y=f.height/2-g.width/2,g.pivot.x=g.pivot.y=-g.width/2,g.scale.x=g.scale.y=.5,this._btn=f,this._text=g,this.addChild(f),this.addChild(g)};return a.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),a.constructor=a.prototype.constructor,a.prototype.enable=function(a,b){var a,b;a=a||.25,b=b||0,this._btn.interactive=this._btn.buttonMode=!0,TweenLite.to(this,a,{alpha:1,delay:b})},a.prototype.disable=function(a,b){var a,b;a=a||.25,b=b||0,this._btn.interactive=this._btn.buttonMode=!1,TweenLite.to(this,a,{alpha:.1,delay:b})},a}),define("fontIcons",function(){var a=function(a,b){var c=document.createElement("div");c.style.fontFamily=a,c.innerHTML=b,document.body.appendChild(c),setTimeout(function(){document.body.removeChild(c)},100)},b={};return b.load=function(){a(b.FONT_NAME,b.FACEBOOK)},b.FONT_NAME="fontello",b.FACEBOOK=Tools.hexDecode("e802"),b.FACEBOOK_1=Tools.hexDecode("e809"),b.FACEBOOK_SQUARED=Tools.hexDecode("e800"),b.FACEBOOK_CIRCLED=Tools.hexDecode("e801"),b.TWITTER=Tools.hexDecode("e803"),b.TWITTER_1=Tools.hexDecode("e806"),b.TWITTER_2=Tools.hexDecode("e807"),b.TWITTER_SQUARED=Tools.hexDecode("e804"),b.TWITTER_CIRCLED=Tools.hexDecode("e805"),b.TWITTER_RECT=Tools.hexDecode("e808"),b.HOME=Tools.hexDecode("e80a"),b.MAIL=Tools.hexDecode("e80c"),b.MAIL_ALT=Tools.hexDecode("e80b"),b.MAIL_1=Tools.hexDecode("e80d"),b.MAIL_2=Tools.hexDecode("e80e"),b.RIGHT_OPEN_BIG=Tools.hexDecode("e80f"),b.LEFT_OPEN_BIG=Tools.hexDecode("e810"),b.UP_OPEN_BIG=Tools.hexDecode("e811"),b.DOWN_OPEN_BIG=Tools.hexDecode("e812"),b.RIGHT_OPEN=Tools.hexDecode("e815"),b.LEFT_OPEN=Tools.hexDecode("e814"),b.UP_OPEN=Tools.hexDecode("e816"),b.DOWN_OPEN=Tools.hexDecode("e813"),b.RIGHT=Tools.hexDecode("e819"),b.LEFT=Tools.hexDecode("e818"),b.UP=Tools.hexDecode("e81a"),b.DOWN=Tools.hexDecode("e817"),b.RIGHT_CIRCLE=Tools.hexDecode("e81d"),b.LEFT_CIRCLE=Tools.hexDecode("e81c"),b.UP_CIRCLE=Tools.hexDecode("e81e"),b.DOWN_CIRCLE=Tools.hexDecode("e81b"),b.RIGHT_CIRCLE_1=Tools.hexDecode("e821"),b.LEFT_CIRCLE_1=Tools.hexDecode("e820"),b.UP_CIRCLE_1=Tools.hexDecode("e822"),b.DOWN_CIRCLE_1=Tools.hexDecode("e81f"),b.SEARCH=Tools.hexDecode("e823"),b.SEARCH_1=Tools.hexDecode("e824"),b.SEARCH_2=Tools.hexDecode("e825"),b.SEARCH_3=Tools.hexDecode("e827"),b.SEARCH_4=Tools.hexDecode("e828"),b.SEARCH_OUTLINE=Tools.hexDecode("e826"),b.load(),b}),define("Gesture",[],function(){function a(a,b){return{x:b.x-a.x>=0?b.x-a.x:b.x-a.x,y:b.y-a.y>=0?b.y-a.y:b.y-a.y}}var b=function(a){var b=this;b._constraintAxe=a,b._isDown=!1,b._target=null,b._domElement=null,b._inc={x:0,y:0},b._pos={x:0,y:0},_move={x:0,y:0},_mouse={x:0,y:0},b.onMove=function(a){_mouse=a.getLocalPosition(this),b._pos=_mouse},b.onDown=function(a){_mouse=a.getLocalPosition(this),b.initPosItem(),b._isDown=!0},b.onUp=function(a){_mouse=a.getLocalPosition(this),b._isDown=!1,this._target&&(b._target.oldx=b._target.position.x,b._target.oldy=b._target.position.y)},b.initPosItem=function(){this._target&&(b._pos=_mouse,b._target.oldPos.x=b._target.position.x,b._target.oldPos.y=b._target.position.y,b._target.startPoint.x=b._pos.x,b._target.startPoint.y=b._pos.y,b._target._lastMouseDownPoint=b._pos)}};return b.prototype.drag=function(a,b,c){a.mousedown=a.touchstart=this.onDown,a.mouseup=a.touchend=this.onUp,a.mousemove=a.touchmove=this.onMove,this._target=b,this._moveCallBack=c,this._target&&(this._target.oldPos={x:this._target.position.x,y:this._target.position.y},this._target.startPoint={x:0,y:0},this.initPosItem(),this._isDown=!0)},b.prototype.update=function(b){if(this._target){if(this._isDown){this._inc.x=this._pos.x,this._inc.y=this._pos.y,_move=a(this._target.startPoint,this._inc);var c=Math.round(_move.x+this._target.oldPos.x);"x"!=this._constraintAxe&&(b?0>=c?this._target.position.y=0:c>=b.width-this._target.width?this._target.position.x=b.width-this._target.width:this._target.position.x=c:this._target.position.x=c,this._moveCallBack&&this._moveCallBack(),this._oldx=this._target.position.x);var d=Math.round(_move.y+this._target.oldPos.y);"y"!=this._constraintAxe&&(b?0>=d?this._target.position.y=0:d>=b.height-this._target.height?this._target.position.y=b.height-this._target.height:this._target.position.y=d:this._target.position.y=d,this._moveCallBack&&this._moveCallBack(),this._oldy=this._target.position.y)}return this._pos}},b}),define("messageBus",function(){var a={};return PIXI.EventTarget.call(a),a}),define("searchBar",["messageBus"],function(){var a=function(){};return a}),define("components/services",[],function(){var a=function(){this.getFaces=function(a,b,c,d){$.getJSON("http://localhost:3000/api/faces",{x:a,y:b,id:d}).done(function(e){c(e,d,a,b)}).fail(function(a,b,c){var d=b+", "+c;console.log("Request Failed: "+d)})}};return a}),define("bloc",["blocIthem"],function(a){var b=function(){function b(){for(var b=0,i=0,j=0;h>j;j++){for(var m=0;g>m;m++)d=new a,d.x=b,d.y=i,c.addChild(d),l[k]=d,k++,b+=e;b=0,i+=f}}PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this);var c,d,e=256,f=256,g=4,h=3,i=g*e,j=h*f,k=0,l=[];c=this,c._width=i,c._height=j,b(),this.setValue=function(a){for(var b=0;b<a.length;b++)if(a[b].number){var c=a[b].number,d=main.martixRange[c].picture;l[b].update(c),l[b].updateImage(d)}},this.process=function(){},this.resize=function(a,b){}};return b.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),b.prototype.process=function(){this.process()},b.prototype.resize=function(a,b){this.resize(a,b)},b}),define("blocIthem",["fontIcons","btnSocial","messageBus"],function(a,b,c){var d=function(){function d(){var d,j,k=new PIXI.Graphics;k.beginFill(0,1),k.lineStyle(1,16777215),k.drawRect(2,2,l-4,m-4),k.endFill(),g.addChild(k),h=new PIXI.Sprite(new PIXI.Texture(new PIXI.BaseTexture)),h.x=(l-150)/2,h.y=(m-150)/2,i=new PIXI.Text("#",{font:"25px Proxima",fill:"#ffffff"}),j=new b(a.FACEBOOK_SQUARED,"#3a5795",f),j.x=l/2-35,j.y=(m+30)/2-15,d=new b(a.TWITTER_SQUARED,"#55acee",e),d.x=l/2+5,d.y=(m+30)/2-15,c.addEventListener("ScrollContainer:StartMoving",function(){d.disable(.25,0),j.disable(.25,0)}),c.addEventListener("ScrollContainer:StopMoving",function(){var a=Math.random()/3;d.enable(.25,a),j.enable(.25,a)}),g.addChild(h),g.addChild(i),g.addChild(j),g.addChild(d)}function e(a){console.log(">>/auth/twitter/register/"+k),parent.location="/auth/twitter/register/"+k}function f(a){console.log(">>/auth/facebook/register/"+k),parent.location="/auth/facebook/register/"+k}var g,h,i,j,k,l=256,m=256;PIXI.DisplayObjectContainer.call(this),g=this,d(),this.process=function(){},this.resize=function(a,b){},this.update=function(a){k=j=a,i.setText(j),h.texture.destroy(),h.texture=new PIXI.Texture(new PIXI.BaseTexture)},this.updateImage=function(a){var b=new PIXI.ImageLoader(a);b.onLoaded=function(){var b=PIXI.TextureCache[a];h.texture=b,h.width=150,h.height=150},b.load()}};return d.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),d.prototype.process=function(){this.process()},d.prototype.resize=function(a,b){this.resize(a,b)},d});var main=main||{};define("main",["map"],function(a){var b=function(b){function c(){n=new PIXI.Stage(0),o={view:D,transparent:!1,resolution:window.devicePixelRatio||1},p=PIXI.autoDetectRecommendedRenderer(0,0,o),D||document.body.appendChild(p.view),d()}function d(){e(),Tools.loadFont(["Proxima"],i)}function e(){l=new PIXI.DisplayObjectContainer,n.addChild(l)}function f(){console.log("INIT PAGES"),main.stage=n,main.view=p.view,main.resolution=window.devicePixelRatio||1,main.textResolution=2,main.fonts={Proxima:"Proxima"},main.martixRange=[],q=new a,l.addChild(q)}function g(){console.log("INIT EVENTS"),window.addEventListener("resize",main.onResize),main.onResize(null)}function h(){$(".modal").modal("show")}function i(){console.log("<< start >>"),console.log("DATA:",E),f(),g(),requestAnimFrame(j),h(),x&&k()}function j(){requestAnimFrame(j),p.render(n),q&&q.process&&q.process(),x&&m.update()}function k(){m=new Stats,m.domElement.style.position="absolute",m.domElement.style.top="0px",m.domElement.style.left="0px",document.body.appendChild(m.domElement)}console.log("<< Kamal::main >>");var l,m,n,o,p,q,r,s,t,u,v,w,x=!0,y=!1,z=1280,A=800,B=2048,C=1536,D=b[0],E=b[1];main.onResize=function(){t=window.innerHeight,u=window.innerWidth,y&&"desktop"==Tools.getDevice()&&(u>=z&&(u=z),t>=A&&(t=A),v=window.innerWidth-u>>1,w=window.innerHeight-t>>1),r=u/B,s=t/C,q&&q.resize&&q.resize(u,t,r,s,v,w),p.resize(u,t),p.view.style.width=u+"px",p.view.style.height=t+"px",window.scrollTo(0,0)},c()};return b}),define("map",["ScrollContainer","bloc","components/services"],function(a,b,c){var d=function(){function d(){var c,d;for(c=0;w>c;c++)for(d=0;x>d;d++){for(var f=[],i=0;y>i;i++)f.push({number:A,picture:"img/"+(0===A?"logo.jpg":parseInt(MathUtils.randomMinMax(0,15))+".jpg")}),main.martixRange[A]={number:A,picture:"img/noimage.jpg"},A++;z[d+","+c]=f}l=new a(ScrollContainerType.SCROLL,main.stage),l.addEventListener("down",e),j.addChild(l);var m=0,n=0;for(c=0;q>c;c++){for(d=0;p>d;d++)k=new b,o[r]=k,k.idX=k.initidX=d,k.idY=k.initidY=c,k.lock0=k.lock1=!0,h(r,d,c),k.x=m,k.y=n,l.addChild(k),m+=k._width,m>=s&&(s=m),r++;m=0,n+=o[r-1]._height,n>t&&(t=n)}u=k._width,v=k._height,g()}function e(a){g()}function f(){for(var a,b,c=0;c<o.length;c++)a=l.y+o[c].y,a>n?(o[c].y-=t,o[c].idY>=q?o[c].idY-=q:o[c].idY=w+o[c].initidY-q,h(c,o[c].idX,o[c].idY)):-v>a&&l.y+(o[c].y+t)<=n&&(o[c].y+=t,o[c].idY<=w-1-q?o[c].idY+=q:o[c].idY=o[c].initidY,h(c,o[c].idX,o[c].idY)),b=l.x+o[c].x,b>m?(o[c].x-=s,o[c].idX>=p?o[c].idX-=p:o[c].idX=x+o[c].initidX-p,h(c,o[c].idX,o[c].idY)):-u>b&&l.x+(o[c].x+s)<=m&&(o[c].x+=s,o[c].idX<=x-1-p?o[c].idX+=p:o[c].idX=o[c].initidX,h(c,o[c].idX,o[c].idY))}function g(){for(var a=0;a<o.length;a++)o[a].oldPos={x:o[a].position.x,y:o[a].position.y}}function h(a,b,c){o[a].setValue(z[b+","+c]),B.getFaces(b,c,i,a)}function i(a,b){for(var c=0;c<a.length;c++)a[c].number&&(main.martixRange[a[c].number]=a[c]);o[b].setValue(a)}var j,k,l,m,n,o=[],p="desktop"==Tools.getDevice()?3:2,q="desktop"==Tools.getDevice()?3:2,r=0,s=0,t=0,u=0,v=0,w=333,x=250,y=12,z=[],A=0,B=new c;PIXI.DisplayObjectContainer.call(this),j=this,d(),this.process=function(){l&&(l.scroll(),f())},this.resize=function(a,b){m=a,n=b}};return d.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),d.prototype.process=function(){this.process()},d.prototype.resize=function(a,b){this.resize(a,b)},d});
//# sourceMappingURL=scripts.js.map